# Signal 서비스 상세 기획서 v2.0

## 📋 목차
1. [서비스 개요](#1-서비스-개요)
2. [핵심 사용자 여정](#2-핵심-사용자-여정)
3. [상세 기능 명세](#3-상세-기능-명세)
4. [새로운 기능: 단골 시스템](#4-새로운-기능-단골-시스템)
5. [기술적 요구사항](#5-기술적-요구사항)
6. [사용자 안전 및 신뢰도](#6-사용자-안전-및-신뢰도)

---

## 1. 서비스 개요

### 1.1 서비스 정의
**Signal**은 "지금, 여기서, 우리"를 슬로건으로 하는 **실시간 취미 연결 플랫폼**입니다. 24시간 이내의 즉흥적인 만남만을 다루어 계획의 부담을 없애고, 푸시 알림 기반으로 기회를 '받아보는' 새로운 소셜 경험을 제공합니다.

### 1.2 핵심 가치 제안
- **극단적 실시간성**: 24시간 이내 약속만 허용
- **0-Friction 탐색**: 푸시 알림으로 기회가 찾아옴
- **관계의 가벼움**: 자동 소멸 채팅방으로 부담 없는 만남
- **취미 기반 연결**: 공통 관심사로 더 깊은 유대감 형성

---

## 2. 핵심 사용자 여정

### 2.1 시그널 보내기 (Signal Broadcasting)

#### Step 1: 시그널 생성
```
📱 메인 화면 → [+ 시그널 보내기] → 시그널 생성
```

**필수 입력 정보:**
- **활동 종류**: 카테고리 선택 + 세부 설명
  - 🎲 게임 (보드게임, 방탈출, PC방)
  - 🍽️ 식사 (카페, 술, 식사)
  - 🏃 운동 (테니스, 헬스, 러닝)
  - 🎭 문화 (영화, 전시, 공연)
  - 📚 스터디 (외국어, 독서, 코딩)
  - 🛍️ 기타 (쇼핑, 산책, 드라이브)

- **시간 설정**: 
  - "지금부터 30분 이내" (즉석 모임)
  - "오늘 오후 2시" (예약 모임)
  - 최대 24시간 이내 제한

- **인원 설정**:
  - 현재 인원 / 총 필요 인원 (예: 1/4명)
  - 성별 제한 옵션 (선택사항)
  - 연령대 제한 (±5세, ±10세, 무관)

- **장소 설정**:
  - 지도에서 핀 지정
  - 장소명 검색 (카카오맵 API)
  - 상세 주소는 채팅방에서 공유

#### Step 2: 시그널 발신
- **알고리즘 기반 타겟팅**: 
  - 반경 5km 이내 사용자
  - 해당 카테고리 관심사 등록 사용자
  - 매너 점수 35도 이상 사용자
  - 최근 1주일 이내 활동 사용자

### 2.2 시그널 받기 (Signal Receiving)

#### Step 1: 푸시 알림 수신
```
🔔 "[시그널] 지금 강남역에서 보드게임 할 2명을 찾고 있어요!"
   → 알림 터치 → 시그널 상세보기
```

#### Step 2: 시그널 상세 정보
- **주최자 정보**: 프로필 사진, 닉네임, 매너온도, 인증뱃지
- **활동 정보**: 구체적 설명, 시간, 예상 소요시간
- **참여자 정보**: 현재 참여 확정된 인원들의 프로필
- **거리 정보**: 내 위치에서 모임 장소까지의 거리

#### Step 3: 참여 요청
```
[참여 신청] 버튼 → 간단 메시지 입력 (선택) → 신청 완료
```

### 2.3 매칭 및 채팅

#### Step 1: 참여자 승인
- 주최자에게 참여 요청 알림
- 요청자의 프로필, 매너온도, 간단 메시지 확인
- [승인] / [거절] 선택

#### Step 2: 그룹 채팅방 자동 생성
```
최소 인원 달성 (2명 이상) → 자동 채팅방 생성
```

**채팅방 특징:**
- 모임 정보 헤더 (시간, 장소, 인원)
- 카운트다운 타이머 표시
- 위치 공유 기능
- 간단 자기소개 템플릿

#### Step 3: 자동 소멸
- **소멸 시점**: 모임 시간 + 24시간 후
- **소멸 전 알림**: 2시간, 30분, 5분 전 알림
- **데이터 삭제**: 모든 메시지 및 사진 완전 삭제

---

## 3. 상세 기능 명세

### 3.1 메인 화면 (지도 기반)

#### 지도 뷰
- **실시간 시그널 표시**: 카테고리별 아이콘으로 구분
- **클러스터링**: 같은 지역 시그널들 그룹핑
- **필터링**: 카테고리, 시간, 성별, 연령대별
- **내 위치 중심**: GPS 기반 자동 중심 조정

#### 리스트 뷰 (지도 하단 시트)
- **거리순 정렬**: 가까운 시그널부터
- **시간순 정렬**: 빠른 시작 시간부터
- **인기순 정렬**: 참여 요청 많은 순
- **스와이프 액션**: 좋아요, 신고, 공유

### 3.2 시그널 생성 플로우

#### 카테고리 선택
```
🎲 게임 → 🃏 보드게임 → "루미큐브, 스플렌더 등"
🍽️ 식사 → ☕ 카페 → "스타벅스 강남점에서 디저트와 함께"
```

#### 똑똑한 입력 지원
- **장소 자동완성**: 카카오맵 API 연동
- **시간 퀵 선택**: "지금", "1시간 후", "저녁 6시"
- **템플릿 활용**: 인기 시그널 패턴 제안

#### 미리보기 및 발송
- 푸시 알림 미리보기
- 예상 도달 사용자 수
- 시그널 수정 / 취소 옵션

### 3.3 알림 시스템

#### 푸시 알림 종류
1. **새 시그널 알림**: 관심 카테고리 기반
2. **참여 요청 알림**: 내 시그널에 참여 신청
3. **승인/거절 알림**: 참여 요청 결과
4. **채팅 메시지**: 그룹 채팅방 새 메시지
5. **시간 알림**: 모임 30분 전 리마인더

#### 알림 설정
- 카테고리별 ON/OFF
- 시간대별 무음 설정 (예: 밤 11시~오전 8시)
- 거리별 설정 (1km, 3km, 5km)
- VIP 알림 (단골 사용자 우선 알림)

---

## 4. 새로운 기능: 단골 시스템

### 4.1 배경 및 목적
기존의 "자동 소멸" 컨셉을 유지하면서, 좋은 경험을 한 사용자들끼리 다시 만날 수 있는 **제한적 재연결** 기능을 제공합니다.

### 4.2 단골 추가 시스템

#### 단골 등록 조건
- 함께 모임을 **3회 이상** 참여
- 상호 매너 평가 **4점 이상**
- **노쇼 이력 없음**

#### 단골 등록 프로세스
```
모임 종료 후 평가 → [단골 추가] 옵션 노출 
→ 상대방도 동일하게 추가 시 "단골" 성사
```

### 4.3 단골 혜택

#### 1. 우선 알림
- 단골이 보낸 시그널은 **우선 푸시 알림**
- 일반 알림과 구분되는 **골드 뱃지** 표시

#### 2. 프라이빗 시그널
- **단골 전용 시그널** 발송 가능
- 단골들만 볼 수 있는 비공개 모임
- 최대 10명까지 단골 등록 제한

#### 3. 단골 현황
```
내 단골 목록 → 각 단골의 최근 활동, 선호 카테고리 확인
```

### 4.4 단골 시스템의 제한 사항

#### 가벼움 유지 장치
- **단골 상한선**: 최대 10명까지만 등록 가능
- **자동 만료**: 3개월간 함께 모임 없으면 자동 해제
- **채팅 금지**: 단골끼리도 모임 외 개별 채팅 불가
- **신고 시 즉시 해제**: 한 번 신고되면 단골 관계 영구 종료

#### 프라이빗 시그널 규칙
- 일반 시그널 대비 **월 5회 제한**
- 단골 중 **최소 3명 이상** 초대해야 발송 가능
- 24시간 규칙 동일 적용

---

## 5. 기술적 요구사항

### 5.1 실시간 처리
- **WebSocket**: 채팅, 실시간 참여자 현황
- **Redis Pub/Sub**: 시그널 상태 변경 실시간 동기화
- **Push Queue**: FCM/APNS 대량 발송 최적화

### 5.2 지리적 기능
- **PostGIS**: 반경 검색, 거리 계산
- **지오펜싱**: 특정 지역 진입/이탈 감지
- **클러스터링**: 지도상 시그널 그룹핑

### 5.3 매칭 알고리즘
```sql
-- 시그널 추천 알고리즘 예시
SELECT s.*, 
       ST_Distance(s.location, user.location) as distance,
       u.manner_score,
       COUNT(ui.category) as interest_match_score
FROM signals s
JOIN users u ON s.user_id = u.id
LEFT JOIN user_interests ui ON u.id = ui.user_id 
WHERE ST_DWithin(s.location, user.location, 5000)  -- 5km 반경
  AND s.start_time BETWEEN NOW() AND NOW() + INTERVAL '24 hours'
  AND s.current_participants < s.max_participants
  AND u.manner_score >= 35.0
  AND ui.category IN (user.interested_categories)
ORDER BY distance ASC, interest_match_score DESC, u.manner_score DESC
```

### 5.4 자동화 시스템
- **스케줄러**: 시그널 만료, 채팅방 소멸 처리
- **Worker**: 푸시 알림 발송, 매너 점수 계산
- **Cron Jobs**: 단골 관계 만료, 통계 집계

---

## 6. 사용자 안전 및 신뢰도

### 6.1 매너 온도 시스템

#### 점수 산정
- **기본 점수**: 36.5도 (첫 가입)
- **긍정 평가**: +0.1~0.5도
- **부정 평가**: -0.2~1.0도
- **노쇼**: -2.0도
- **신고 접수**: -5.0도

#### 등급별 제재
- **32도 미만**: 시그널 생성 제한
- **30도 미만**: 참여 요청 제한  
- **25도 미만**: 서비스 이용 정지

### 6.2 신고 및 제재 시스템

#### 신고 카테고리
- 노쇼 (가장 중요)
- 부적절한 언행
- 상업적 목적 이용
- 허위 정보 제공

#### 자동 제재 시스템
- **AI 기반 텍스트 필터링**: 부적절 언어 자동 감지
- **패턴 분석**: 반복적 노쇼 사용자 조기 식별
- **사진 검증**: 프로필 사진 AI 검증

### 6.3 본인 인증

#### 필수 인증
- 휴대폰 번호 인증
- 이메일 인증

#### 선택 인증 (신뢰도 boost)
- 소셜 로그인 (Google, Apple)
- 직장 인증 (회사 이메일)
- 학교 인증 (대학 이메일)

---

## 7. 비즈니스 모델

### 7.1 수익 구조
- **프리미엄 구독** (월 4,900원)
  - 무제한 시그널 생성 (기본: 월 20회)
  - 프라이빗 시그널 월 10회 (기본: 5회)
  - 고급 필터 기능
  - 단골 슬롯 확장 (20명)

### 7.2 파트너십
- **지역 상권 제휴**: 카페, 보드게임카페 할인 쿠폰
- **활동 업체 연계**: 방탈출, 볼링장 등 그룹 할인
- **브랜드 협업**: 취미 관련 브랜드 이벤트 시그널

---

## 8. 개발 우선순위 로드맵

### Phase 1: MVP (4주)
- [x] 사용자 관리 및 OAuth 인증
- [x] 기본 시그널 CRUD
- [ ] 실시간 지도 뷰
- [ ] 푸시 알림 시스템

### Phase 2: 코어 기능 (6주)
- [ ] WebSocket 채팅 시스템
- [ ] 매칭 알고리즘 구현
- [ ] 매너 점수 시스템
- [ ] 자동 소멸 채팅방

### Phase 3: 고급 기능 (8주)
- [ ] 단골 시스템
- [ ] 프라이빗 시그널
- [ ] 고급 필터링
- [ ] 통계 및 분석

### Phase 4: 최적화 (4주)
- [ ] 성능 최적화
- [ ] 보안 강화
- [ ] 사용자 피드백 반영
- [ ] 베타 테스트 진행

---

## 9. 핵심 성공 지표 (KPI)

### 사용자 참여도
- **DAU/MAU 비율**: 목표 30% 이상
- **시그널 생성률**: 사용자당 주간 1회 이상
- **매칭 성공률**: 70% 이상

### 사용자 만족도
- **매너 점수 평균**: 37도 이상 유지
- **재사용률**: 첫 모임 후 1주일 내 재사용 50%
- **단골 형성률**: 활성 사용자의 30%가 단골 보유

### 비즈니스 지표
- **지역별 밀도**: 핵심 지역 시간당 5개 이상 활성 시그널
- **프리미엄 전환율**: 3개월 이내 10%
- **사용자 획득 비용**: 월 구독료 대비 50% 이하

---

*이 기획서는 지속적으로 업데이트되며, 사용자 피드백과 데이터 분석을 바탕으로 개선됩니다.*